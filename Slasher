-- åŸºæœ¬æœå‹™èˆ‡ç©å®¶
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")

-- å„²å­˜è‡ªå®šç¾©åç¨±
local savedName = "catlyn" -- ä¿®æ­£ï¼šç§»é™¤äº† text è®Šæ•¸

-- æ»¯ç©ºç‹€æ…‹
local floatingEnabled = false
local floatingConnection = nil
local speedConnection = nil
local fullbrightConnection = nil
local thirdPersonConnection = nil

-- ä¿®æ”¹åç¨±æ¨™ç±¤çš„å‡½æ•¸
local function changeNametag()
    local playerName = LocalPlayer.Name
    local character = workspace:FindFirstChild(playerName)
    if character then
        local head = character:FindFirstChild("Head")
        if head then
            local nametagFolder = head:FindFirstChild("Nametag")
            if nametagFolder then
                local labels = nametagFolder:FindFirstChild("Labels")
                if labels then
                    local topLabel = labels:FindFirstChild("TopLabel")
                    if topLabel then
                        topLabel.Text = savedName
                    end
                end
            end
        end
    end
end

-- åˆæ¬¡åŸ·è¡Œä¿®æ”¹åç¨±
changeNametag()

-- ç›£è½è§’è‰²é‡ç”Ÿäº‹ä»¶ï¼Œé‡ç”Ÿå¾Œé‡æ–°æ‡‰ç”¨åç¨±
LocalPlayer.CharacterAdded:Connect(function(character)
    -- ç­‰å¾…è§’è‰²å®Œå…¨è¼‰å…¥
    character:WaitForChild("Head", 10)
    wait(0.5) -- ç­‰å¾…åç¨±æ¨™ç±¤ç³»çµ±åˆå§‹åŒ–
    changeNametag()
end)

-- GUI ä¸»é«”
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "MaolingHub"

-- ä¿®æ­£ï¼šä¸»æ¡†æ¶æ¨£å¼
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 450, 0, 350)
Frame.Position = UDim2.new(0.5, -225, 0.5, -175)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

-- æ·»åŠ æ¼¸å±¤æ•ˆæœ
local gradient = Instance.new("UIGradient", Frame)
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 35)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(35, 35, 50))
}
gradient.Rotation = 45

-- æ·»åŠ å¤–ç™¼å…‰æ•ˆæœ
local stroke = Instance.new("UIStroke", Frame)
stroke.Color = Color3.fromRGB(100, 150, 255)
stroke.Thickness = 2
stroke.Transparency = 0.5

Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 15)

-- ä¿®æ­£ï¼šæ¨™é¡Œæ¨£å¼
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, -80, 0, 50)
Title.Position = UDim2.new(0, 15, 0, 5)
Title.BackgroundTransparency = 1
Title.Text = "âœ¨è²“ç²çš„è…³æœ¬å€âœ¨"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left

-- æ·»åŠ æ¨™é¡Œç™¼å…‰æ•ˆæœ
local titleStroke = Instance.new("UIStroke", Title)
titleStroke.Color = Color3.fromRGB(100, 150, 255)
titleStroke.Thickness = 1
titleStroke.Transparency = 0.3

-- ä¿®æ­£ï¼šé—œé–‰æŒ‰éˆ•æ¨£å¼å’ŒåŠŸèƒ½
local Close = Instance.new("TextButton", Frame)
Close.Size = UDim2.new(0, 35, 0, 35)
Close.Position = UDim2.new(1, -40, 0, 8)
Close.Text = "x"
Close.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.Font = Enum.Font.GothamBold
Close.TextSize = 18
Close.BorderSizePixel = 0

-- æ·»åŠ é—œé–‰æŒ‰éˆ•æ•ˆæœ
local closeGradient = Instance.new("UIGradient", Close)
closeGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(220, 60, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(180, 40, 40))
}

Instance.new("UICorner", Close).CornerRadius = UDim.new(0, 8)

-- ä¿®æ­£ï¼šé—œé–‰æŒ‰éˆ•åŠŸèƒ½
Close.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    _G.maolingHubLoaded = false -- é‡ç½®è¼‰å…¥ç‹€æ…‹
end)

-- ä¿®æ­£ï¼šæœ€å°åŒ–æŒ‰éˆ•æ¨£å¼
local Minimize = Instance.new("TextButton", Frame)
Minimize.Size = UDim2.new(0, 35, 0, 35)
Minimize.Position = UDim2.new(1, -80, 0, 8)
Minimize.Text = "â”€"
Minimize.BackgroundColor3 = Color3.fromRGB(100, 100, 120)
Minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimize.Font = Enum.Font.GothamBold
Minimize.TextSize = 16
Minimize.BorderSizePixel = 0

local minimizeGradient = Instance.new("UIGradient", Minimize)
minimizeGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 100, 120)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 80, 100))
}

Instance.new("UICorner", Minimize).CornerRadius = UDim.new(0, 8)

-- ä¿®æ­£ï¼šå´é‚Šæ¬„ç‚ºå¯æ»¾å‹•
local SideBar = Instance.new("ScrollingFrame", Frame)
SideBar.Size = UDim2.new(0, 130, 1, -55)
SideBar.Position = UDim2.new(0, 5, 0, 50)
SideBar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
SideBar.BorderSizePixel = 0
SideBar.ScrollBarThickness = 6
SideBar.CanvasSize = UDim2.new(0, 0, 0, 200)
SideBar.AutomaticCanvasSize = Enum.AutomaticSize.Y
SideBar.ScrollingDirection = Enum.ScrollingDirection.Y

-- æ·»åŠ å´é‚Šæ¬„æ¨£å¼
local sidebarGradient = Instance.new("UIGradient", SideBar)
sidebarGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 50)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(45, 45, 65))
}

Instance.new("UICorner", SideBar).CornerRadius = UDim.new(0, 10)

-- æ·»åŠ UIListLayoutåˆ°å´é‚Šæ¬„
local sidebarLayout = Instance.new("UIListLayout", SideBar)
sidebarLayout.Padding = UDim.new(0, 8)
sidebarLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- ä¿®æ­£ï¼šå…§å®¹å€åŸŸ
local Content = Instance.new("Frame", Frame)
Content.Size = UDim2.new(1, -145, 1, -55)
Content.Position = UDim2.new(0, 140, 0, 50)
Content.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
Content.BorderSizePixel = 0

local contentGradient = Instance.new("UIGradient", Content)
contentGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(50, 50, 75))
}

Instance.new("UICorner", Content).CornerRadius = UDim.new(0, 10)

-- ä¿®æ­£ï¼šç¸®å°åŠŸèƒ½çš„å°ºå¯¸
local isMinimized = false
local fullSize = UDim2.new(0, 450, 0, 350)
local miniSize = UDim2.new(0, 450, 0, 50)

Minimize.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    SideBar.Visible = not isMinimized
    Content.Visible = not isMinimized
    Frame.Size = isMinimized and miniSize or fullSize
end)

-- ä¿®æ­£ï¼šåˆ†å€æŒ‰éˆ•æ¨£å¼
local function createSectionButton(text, order, parent)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 120, 0, 45)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.BorderSizePixel = 0
    
    -- æ·»åŠ æ¼¸å±¤
    local btnGradient = Instance.new("UIGradient", btn)
    btnGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(70, 70, 90)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(50, 50, 70))
    }
    
    -- æ·»åŠ åœ“è§’
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
    
    -- æ·»åŠ æé‚Š
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Color = Color3.fromRGB(100, 150, 255)
    btnStroke.Thickness = 1
    btnStroke.Transparency = 0.2
    
    return btn
end

-- å‰µå»ºè¡€æœˆä¹‹åœ°åˆ†å€æŒ‰éˆ•
local Section1 = createSectionButton("ğŸŒ™ è¡€æœˆä¹‹åœ°", 1, SideBar)

-- ä¿®æ­£ï¼šä¸€èˆ¬æŒ‰éˆ•æ¨£å¼
local function createButton(text, order, parent, spacing)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 240, 0, 35)
    btn.Position = UDim2.new(0.5, -120, 0, 15 + (order - 1) * spacing)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.BorderSizePixel = 0
    
    -- æ·»åŠ æ¼¸å±¤æ•ˆæœ
    local btnGradient = Instance.new("UIGradient", btn)
    btnGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(60, 120, 200)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 100, 180))
    }
    
    -- æ·»åŠ åœ“è§’
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    
    -- æ·»åŠ æé‚Š
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Color = Color3.fromRGB(100, 150, 255)
    btnStroke.Thickness = 1
    btnStroke.Transparency = 0.1
    
    -- æ·»åŠ hoveræ•ˆæœ
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
        btnStroke.Transparency = 0.05
    end)
    
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        btnStroke.Transparency = 0.1
    end)
    
    return btn
end

-- è¡€æœˆä¹‹åœ°åˆ†å€ä½¿ç”¨ ScrollingFrame
local BloodMoonScroll = Instance.new("ScrollingFrame", Content)
BloodMoonScroll.Size = UDim2.new(1, 0, 1, 0)
BloodMoonScroll.CanvasSize = UDim2.new(0, 0, 0, 300)
BloodMoonScroll.ScrollBarThickness = 6
BloodMoonScroll.BackgroundTransparency = 1
BloodMoonScroll.Visible = true
BloodMoonScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
BloodMoonScroll.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar
BloodMoonScroll.ScrollingDirection = Enum.ScrollingDirection.Y

-- æ·»åŠ æ»¾å‹•æ¡†æ¨£å¼æ”¹å–„
local function styleScrollFrame(scrollFrame)
    scrollFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
    scrollFrame.BorderSizePixel = 0
    scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    
    local scrollGradient = Instance.new("UIGradient", scrollFrame)
    scrollGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 65)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(55, 55, 80))
    }
    
    Instance.new("UICorner", scrollFrame).CornerRadius = UDim.new(0, 8)
end

-- æ‡‰ç”¨åˆ°æ»¾å‹•æ¡†
styleScrollFrame(BloodMoonScroll)

-- å‰µå»ºè¡€æœˆä¹‹åœ°åˆ†å€çš„æŒ‰éˆ•
local AutoEnterBtn = createButton("å‚³é€åˆ°è¡€æœˆä¹‹åœ°", 1, BloodMoonScroll, 50)
local RemoveBloodMoonBtn = createButton("åˆªé™¤è¡€æœˆ", 2, BloodMoonScroll, 50)
local ThirdPersonBtn = createButton("ç¬¬ä¸‰äººç¨±", 3, BloodMoonScroll, 50)
local SpeedBtn = createButton("åŠ é€Ÿ", 4, BloodMoonScroll, 50)
local FloatBtn = createButton("æ»¯ç©ºï¼ˆèº²Jasoné£›åˆ€ç”¨ï¼‰", 5, BloodMoonScroll, 50)

-- åŠŸèƒ½å¯¦ç¾

-- 1. è‡ªå‹•åµæ¸¬ä¸¦å‚³é€åˆ°è¡€æœˆä¹‹åœ°åŠŸèƒ½
local function findLabyrinthPath()
    -- ç²å–æ‰€æœ‰ç©å®¶åç¨±
    for _, player in pairs(Players:GetPlayers()) do
        local labyrinthPath = player.Name .. "'s Labyrinth"
        local fullPath = Workspace:FindFirstChild(labyrinthPath)
        
        if fullPath then
            local paintingModel = fullPath:FindFirstChild("PaintingModel")
            if paintingModel then
                local hitBox = paintingModel:FindFirstChild("HitBox")
                if hitBox then
                    return hitBox
                end
            end
        end
    end
    return nil
end

AutoEnterBtn.MouseButton1Click:Connect(function()
    local character = LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local success, error = pcall(function()
            local targetHitBox = findLabyrinthPath()
            
            if targetHitBox then
                -- å‚³é€åˆ° HitBox ä½ç½®
                local targetPosition = targetHitBox.Position + Vector3.new(0, 5, 0)
                character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
                character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                character.HumanoidRootPart.AngularVelocity = Vector3.new(0, 0, 0)
                print("å·²å‚³é€åˆ°è¡€æœˆä¹‹åœ°")
            else
                print("æœªæ‰¾åˆ°ä»»ä½•ç©å®¶çš„è¿·å®®")
            end
        end)
        
        if not success then
            print("å‚³é€å¤±æ•—: " .. tostring(error))
        end
    else
        print("è§’è‰²æœªè¼‰å…¥å®Œæˆ")
    end
end)

-- 2. åˆªé™¤è¡€æœˆ + å…¨äº®åŠŸèƒ½ï¼ˆåˆä½µFullBrightåŠŸèƒ½ï¼‰
RemoveBloodMoonBtn.MouseButton1Click:Connect(function()
    local removed = false
    
    -- åˆªé™¤è¡€æœˆå¤©ç©º
    local bloodMoonSky = Lighting:FindFirstChild("The Blood Moon sky")
    if bloodMoonSky then
        bloodMoonSky:Destroy()
        print("å·²åˆªé™¤è¡€æœˆå¤©ç©º")
        removed = true
    end
    
    -- åˆªé™¤åœ°åœ–é»‘æš—ï¼ˆå…©å€‹å¯èƒ½çš„è·¯å¾‘ï¼‰
    local map = Workspace:FindFirstChild("Map")
    if map then
        local mapDarkness = map:FindFirstChild("Darkness")
        if mapDarkness then
            mapDarkness:Destroy()
            print("å·²åˆªé™¤åœ°åœ–é»‘æš—")
            removed = true
        end
    end
    
    -- ç›´æ¥åˆªé™¤ workspace.Map.Darkness
    local workspaceMapDarkness = Workspace.Map:FindFirstChild("Darkness")
    if workspaceMapDarkness then
        workspaceMapDarkness:Destroy()
        print("å·²åˆªé™¤workspace.Map.Darkness")
        removed = true
    end
    
    -- é–‹å•ŸæŒçºŒå…¨äº®æ¨¡å¼ï¼ˆåˆä½µFullBrightåŠŸèƒ½ï¼‰
    if fullbrightConnection then
        fullbrightConnection:Disconnect()
        fullbrightConnection = nil
        RemoveBloodMoonBtn.Text = "åˆªé™¤è¡€æœˆ"
        RemoveBloodMoonBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        print("å…¨äº®æ¨¡å¼å·²é—œé–‰")
    else
        RemoveBloodMoonBtn.BackgroundColor3 = Color3.fromRGB(200, 120, 60)
        
        -- æŒçºŒå…¨äº®ï¼ˆçµåˆåŸæœ¬çš„FullBrightåŠŸèƒ½ï¼‰
        fullbrightConnection = game:GetService("RunService").Heartbeat:Connect(function()
            -- è¨­ç½®ç’°å¢ƒå…‰ç…§
            Lighting.Brightness = 2
            Lighting.ClockTime = 12
            Lighting.FogEnd = 100000
            Lighting.GlobalShadows = false
            Lighting.Ambient = Color3.fromRGB(255, 255, 255)
            Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
            Lighting.ShadowSoftness = 1
            Lighting.ExposureCompensation = 0.5
            
            -- ç§»é™¤æ‰€æœ‰é™°å½±æ•ˆæœ
            for _, obj in pairs(Lighting:GetChildren()) do
                if obj:IsA("Atmosphere") or obj:IsA("BloomEffect") or obj:IsA("ColorCorrectionEffect") then
                    obj.Enabled = false
                elseif obj:IsA("SunRaysEffect") then
                    obj.Enabled = false
                end
            end
            
            -- ç¢ºä¿æ²’æœ‰æ–°çš„è¡€æœˆæ•ˆæœ
            local newBloodMoon = Lighting:FindFirstChild("The Blood Moon sky")
            if newBloodMoon then
                newBloodMoon:Destroy()
            end
            
            -- æŒçºŒæª¢æŸ¥ä¸¦åˆªé™¤Darkness
            if map then
                local newDarkness = map:FindFirstChild("Darkness")
                if newDarkness then
                    newDarkness:Destroy()
                end
            end
            
            local newWorkspaceMapDarkness = Workspace.Map:FindFirstChild("Darkness")
            if newWorkspaceMapDarkness then
                newWorkspaceMapDarkness:Destroy()
            end
        end)
        
        print("æŒçºŒå…¨äº®æ¨¡å¼å·²é–‹å•Ÿ")
    end
    
    if not removed and not fullbrightConnection then
        print("æœªæ‰¾åˆ°è¡€æœˆæ•ˆæœ")
    end
end)

-- 3. æŒçºŒç¬¬ä¸‰äººç¨±åŠŸèƒ½ï¼ˆæ”¹ç‚ºç¶“å…¸æ¨¡å¼ï¼‰
ThirdPersonBtn.MouseButton1Click:Connect(function()
    if thirdPersonConnection then
        thirdPersonConnection:Disconnect()
        thirdPersonConnection = nil
        ThirdPersonBtn.Text = "ç¬¬ä¸‰äººç¨±"
        ThirdPersonBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        
        -- é‡ç½®ç›¸æ©Ÿè¨­å®š
        LocalPlayer.CameraMaxZoomDistance = 400
        LocalPlayer.CameraMinZoomDistance = 0.5
        
        -- é‡ç½®ç‚ºé»˜èªç›¸æ©Ÿæ¨¡å¼
        local character = LocalPlayer.Character
        if character then
            local camera = workspace.CurrentCamera
            if camera then
                camera.CameraType = Enum.CameraType.Custom
            end
        end
        
        print("ç¬¬ä¸‰äººç¨±å·²é—œé–‰")
    else
        ThirdPersonBtn.BackgroundColor3 = Color3.fromRGB(200, 120, 60)
        
        -- è¨­ç½®ç›¸æ©Ÿæ¨¡å¼ç‚ºç¶“å…¸
        LocalPlayer.CameraMode = Enum.CameraMode.Classic
        
        -- ç«‹å³è¨­ç½®ç¶“å…¸æ¨¡å¼
        LocalPlayer.CameraMaxZoomDistance = 50
        LocalPlayer.CameraMinZoomDistance = 10
        
        local character = LocalPlayer.Character
        if character then
            local camera = workspace.CurrentCamera
            if camera and character:FindFirstChild("Humanoid") then
                camera.CameraSubject = character.Humanoid
                camera.CameraType = Enum.CameraType.Classic -- æ”¹ç‚ºç¶“å…¸æ¨¡å¼
            end
        end
        
        -- æŒçºŒç›£æ§ç¬¬ä¸‰äººç¨±è¨­å®š
        thirdPersonConnection = game:GetService("RunService").Heartbeat:Connect(function()
            -- æŒçºŒè¨­ç½®ç›¸æ©Ÿè·é›¢
            LocalPlayer.CameraMaxZoomDistance = 50
            LocalPlayer.CameraMinZoomDistance = 10
            
            local char = LocalPlayer.Character
            if char then
                local cam = workspace.CurrentCamera
                if cam and char:FindFirstChild("Humanoid") then
                    cam.CameraSubject = char.Humanoid
                    cam.CameraType = Enum.CameraType.Classic -- æŒçºŒè¨­ç½®ç‚ºç¶“å…¸æ¨¡å¼
                end
            end
        end)
        
        print("ç¬¬ä¸‰äººç¨±ï¼ˆç¶“å…¸æ¨¡å¼ï¼‰å·²é–‹å•Ÿ")
    end
end)

-- 4. æŒçºŒåŠ é€ŸåŠŸèƒ½
SpeedBtn.MouseButton1Click:Connect(function()
    -- åœæ­¢ä¹‹å‰çš„åŠ é€Ÿé€£æ¥
    if speedConnection then
        speedConnection:Disconnect()
        speedConnection = nil
        SpeedBtn.Text = "åŠ é€Ÿ"
        SpeedBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        print("åŠ é€Ÿå·²é—œé–‰")
    else
        -- é–‹å§‹æŒçºŒåŠ é€Ÿ
        SpeedBtn.BackgroundColor3 = Color3.fromRGB(200, 120, 60)
        
        speedConnection = game:GetService("RunService").Heartbeat:Connect(function()
            local character = LocalPlayer.Character
            if character and character:FindFirstChild("Humanoid") then
                character.Humanoid.WalkSpeed = 35
            end
        end)
        print("æŒçºŒåŠ é€Ÿå·²é–‹å•Ÿ")
    end
end)

-- 5. æ»ç©ºåŠŸèƒ½
FloatBtn.MouseButton1Click:Connect(function()
    floatingEnabled = not floatingEnabled
    
    if floatingEnabled then
        FloatBtn.Text = "åœæ­¢æ»¯ç©º"
        FloatBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
        
        -- é–‹å§‹æ»¯ç©º
        floatingConnection = game:GetService("RunService").Heartbeat:Connect(function()
            local character = LocalPlayer.Character
            if character and character:FindFirstChild("HumanoidRootPart") then
                local rootPart = character.HumanoidRootPart
                -- å¹³æ»‘ç§»å‹•åˆ°ç›®æ¨™ä½ç½®
                rootPart.CFrame = CFrame.new(-5, 65, 13)
                rootPart.Velocity = Vector3.new(0, 0, 0)
                rootPart.AngularVelocity = Vector3.new(0, 0, 0)
            end
        end)
        print("æ»¯ç©ºå·²é–‹å•Ÿ")
    else
        FloatBtn.Text = "æ»¯ç©ºï¼ˆèº²Jasoné£›åˆ€ç”¨ï¼‰"
        FloatBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        
        -- åœæ­¢æ»¯ç©ºä¸¦å®‰å…¨è‘—é™¸
        if floatingConnection then
            floatingConnection:Disconnect()
            floatingConnection = nil
        end
        
        -- å®‰å…¨è‘—é™¸è™•ç†
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            local rootPart = character.HumanoidRootPart
            -- æ¸…é™¤æ‰€æœ‰é€Ÿåº¦
            rootPart.Velocity = Vector3.new(0, 0, 0)
            rootPart.AngularVelocity = Vector3.new(0, 0, 0)
            
            -- ç¨å¾®æå‡ä½ç½®é¿å…å¡åœ°
            local currentPos = rootPart.Position
            rootPart.CFrame = CFrame.new(currentPos.X, currentPos.Y + 2, currentPos.Z)
            
            wait(0.1)
            
            -- è®“ç©å®¶è‡ªç„¶ä¸‹é™
            rootPart.Velocity = Vector3.new(0, -10, 0)
        end
        
        print("æ»¯ç©ºå·²é—œé–‰")
    end
end)

-- åˆ†å€æŒ‰éˆ•é»æ“Šäº‹ä»¶
Section1.MouseButton1Click:Connect(function()
    BloodMoonScroll.Visible = true
end)
